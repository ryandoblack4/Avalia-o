<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro Produto</title>
  <link rel="stylesheet" href="/static/css/style_cadastro_produtos.css">
  <link rel="stylesheet" href="/static/css/admin.css">
</head>
<body>

<div class="form-container">
  <h1>Cadastrar / Editar Produto</h1>
  <form id="produtoForm" enctype="multipart/form-data" class="produto-form">
    <input type="hidden" id="editingId">

    <div class="form-row">
      <label for="nome">Nome</label>
      <input type="text" id="nome" required placeholder="Nome do produto">
    </div>

    <div class="form-row">
      <label for="categoria">Categoria</label>
      <select id="categoria">
        <option value="">-- Selecione categoria --</option>
        <option value="masculino">Masculino</option>
        <option value="feminino">Feminino</option>
        <option value="infantil">Infantil</option>
      </select>
    </div>

    <div class="form-row">
      <label for="descricao">Descri√ß√£o</label>
      <textarea id="descricao" required placeholder="Descri√ß√£o breve"></textarea>
    </div>

    <div class="form-row group">
      <div>
        <label for="preco">Pre√ßo (R$)</label>
        <input type="number" id="preco" step="0.01" required>
      </div>
      <div>
        <label for="quantidade">Quantidade</label>
        <input type="number" id="quantidade" required>
      </div>
    </div>

    <div class="form-row">
      <label for="imagem">Imagem do Produto</label>
      <input type="file" id="imagem" name="imagem" accept="image/*">
    </div>

    <div class="form-actions">
      <button type="submit" class="btn primary">Salvar</button>
      <a href="/templates/lista_produtos.html" class="btn secondary">Cancelar</a>
    </div>
  </form>
</div>

<aside id="menuLateralAdmin">
  <h3>‚öôÔ∏è Modo Admin</h3>
  <a href="/templates/lista_produtos.html">üßæ Lista de Produtos</a>
  <a href="/templates/cadastro_produtos.html">‚ûï Cadastrar Produto</a>
  <button id="logoutAdmin">üö™ Sair</button>
</aside>

<script>
    const usuarioLogado = localStorage.getItem('usuarioLogado');
    const role = localStorage.getItem('userRole');
    if (!usuarioLogado || role !== 'admin') {
      alert('Acesso negado! Voc√™ precisa estar logado como admin.');
      window.location.href = '/templates/index.html';
    } else {
      document.getElementById('menuLateralAdmin').style.display = 'flex';
      document.body.classList.add('menu-ativo');
  }

  document.getElementById('logoutAdmin').addEventListener('click', () => {
    localStorage.removeItem('usuarioLogado');
    localStorage.removeItem('userRole');
    localStorage.removeItem('nomeUsuario');
    window.location.href = '/templates/tela_login.html';
  });

</script>

<script src="/static/js/cadastro_produtos.js"></script>
